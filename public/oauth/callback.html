<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>OAuth Callback</title>
</head>
<body>
<script>
    // Parse the OAuth response from the URL hash
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);

    const accessToken = params.get('access_token');
    const error = params.get('error');
    const state = params.get('state');

    // Send message to parent window
    if (window.opener) {
        window.opener.postMessage({
            type: 'google-oauth-callback',
            accessToken: accessToken,
            error: error,
            state: state
        }, window.location.origin);

        // Close the popup window
        window.close();
    } else {
        document.body.innerHTML = '<p>Authentication complete. You can close this window.</p>';
    }
</script>
</body>
</html>